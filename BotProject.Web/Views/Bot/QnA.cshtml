@using BotProject.Web.Models;
@model FormQuestionAnswerViewModel
@{
    ViewBag.Title = "QnA";
    Layout = "~/Views/Shared/_Layout.cshtml";
    var cards = (IEnumerable<BotProject.Web.Models.GroupCardViewModel>)ViewBag.Cards;
}
<link href="https://cdnjs.cloudflare.com/ajax/libs/jquery.selectboxit/3.8.0/jquery.selectBoxIt.css" rel="stylesheet" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-sweetalert/1.0.1/sweetalert.css" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-sweetalert/1.0.1/sweetalert.min.css" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-sweetalert/1.0.1/sweetalert.min.css.map" rel="stylesheet" type="application/json">
<link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.5/css/select2.min.css" rel="stylesheet" />
<link href="~/assets/client/css/card.css" rel="stylesheet" />
<link href="~/assets/client/css/common-bot.css" rel="stylesheet" />
<link href="~/assets/client/css/components.css" rel="stylesheet" />
<style>
    @@media (min-width: 576px) {
        .modal-card {
            max-width: 1320px;
            margin: 1.75rem auto;
            max-height: 100%;
            position: relative;
            overflow: auto !important;
            padding-right: unset;
        }
    }

    .icon-spinner4.spinner {
        color: #fff;
    }

    .icon-spinner4.spinner {
        font-size: 30px;
    }

    .has-error .form-control {
        border-color: #ed4956;
        -webkit-box-shadow: inset 0 1px 1px rgba(0,0,0,0.075);
        box-shadow: inset 0 1px 1px rgba(0,0,0,0.075);
    }
</style>
<style>
    .select2-dropdown {
        z-index: 999999;
    }

    .select2-dropdown {
        background-color: white;
        border: 1px solid #aaa;
        border-radius: 4px;
        box-sizing: border-box;
        display: block;
        position: absolute;
        left: -100000px;
        width: 100%;
        z-index: 999999;
    }

    .select2 {
        width: 100%;
    }

    select + .select2-container {
        width: 100% !important;
    }

    .product-colors input[type=checkbox], input[type=radio] {
        box-sizing: border-box;
        padding: 0;
        display: inline-block;
    }

    .ml10 {
        margin-left: 10px;
    }
    .target-field{
        border: 1px solid #ddd;
        padding: 10px 0px 3px 5px;
    }
        .breadcrumb{
        padding: .75rem 1rem;
    }
</style>
<input type="hidden" id="botId" value="@Model.BotID" />
<input type="hidden" id="formQnaID" value="@Model.ID" />
<input type="hidden" id="formAlias" value="@Model.Alias" />
<div class="row">
    <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12 p-b-10">
        <div class="d-flex" style="border-bottom: 1px solid #e6e6f2;">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><i class="fa fa-home" href="javascript:void(0)">@ViewBag.BotName</i></li>
                <li class="breadcrumb-item">Huấn luyện bot</li>
                <li class="breadcrumb-item active">@Model.Name</li>
            </ol>
            <div class="toolbar ml-auto p-r-10 p-t-10">
                <a href="#" class="btn btn-success btn-sm saveKeyword"><i class="fas fa-sync-alt"></i> Save and retrain</a>
                <a href="#" class="btn btn-primary btn-sm"><i class="fas fa-upload"></i> Publish</a>
            </div>
        </div>
        <div class="d-flex">
            <p style="padding:15px">
                <span class="text-semibold">Hướng dẫn:</span><br>
                <span>- Sử dụng<input type="checkbox" checked="" disabled="">là từ khóa. Ví dụ: Nếu [người dùng nói] là “chào” thì khi người dùng nhập mà trong câu có từ “chào”(Chào bạn), bot sẽ trả về kết quả tương ứng trong phần [Bot trả lời].</span><br>
                @*- Sử dụng <input type="checkbox" disabled="">  là cụm từ. Ví dụ: Nếu [người dùng nói] là “tên của bạn là gì” thì khi người dùng nhập có nội dung tương tự “tên của cậu là gì?”, bot sẽ trả về kết quả tương ứng trong phần [Bot trả lời].<br>*@
                <span>- Sử dụng &lt;get name=&quot;{{attribute}}&quot; /&gt;   trả ra thông tin.</span><br />
                <span>- Sử dụng &lt;set name=&quot;{{attribute}}&quot; /&gt;&lt;star /&gt;&lt;/set&gt;  để lấy thông tin khi sử dụng<input type="checkbox" checked="" disabled=""> là từ khóa.</span><br />
                <span>- Sử dụng tạo thẻ để thiếp lập luồng đi trả lời.</span>
            </p>
        </div>    
    </div>
    <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12 pageheader-title">
        @*<div class="d-flex">
            <h5 class="pageheader-title">@Model.Name.ToUpper() </h5>
            <div class="toolbar ml-auto p-r-10">
                <a href="#" class="btn btn-success btn-sm saveKeyword"><i class="fas fa-sync-alt"></i> Save and retrain</a>
                <a href="#" class="btn btn-primary btn-sm"><i class="fas fa-upload"></i> Publish</a>
            </div>
        </div>*@
        <div class="d-flex">
            <p style="font-size:13pt;padding-left:20px;color:darkblue;text-decoration:underline" id="search-label" for="search-terms" class="addCt"><i class="fas fa-plus-circle"></i> Add rule</p>
            @*<div class="ml-auto" style="font-size:13px;padding-right:100px">Retrained 2 phút trước</div>*@
        </div>
    </div>
</div>

<div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12" id="pageLearning">
    <div id="paging">
        @*<div class="panel-flat"><div class="pull-right"><select class="form-control limitPage"><option value="5" selected="">5</option><option value="10">10</option><option value="15">15</option><option value="20">20</option></select></div></div>*@
    </div>
    @*<nav class="pagination pagination_type1">
            <ol class="pagination__list" id="pagination-list"></ol>
            <div class="pagination__list m-l-20">
                <select id="results-pp">
                    <option value="5">5</option>
                    <option value="10" selected>10</option>
                    <option value="20">20</option>
                    <option value="100">100</option>
                    <option value="All">Tất cả</option>
                </select>
                <span class="m-l-10">Số lượng hiển thị</span>
            </div>
            <span id="pagination-text-number-show" style="margin:10px 10px 0 auto"></span>
        </nav>*@

    <div class="card form-qna" id="form-qna">
        <div class="wrap-content" data-countpanel="1">
            <div class="panel panel-flat" indexpanel="1" data-quesgroup-id="">
                <div class="panel-body">
                    <i class="fa fa-trash icon-bin rmCt"></i>
                    <div class="wrMove">
                        <i class="fa fa-arrow-up moveTop" style="display: inline;"></i>
                        <i class="fa fa-arrow-down moveBot" style="display: inline;"></i>
                    </div>
                    <div class="row">
                        <div class="col-lg-5 userSay">
                            <label>Người dùng nói</label>
                            <div class="input-group">
                                <ul class="tags checkvalid">
                                    <li class="tagAdd taglist">
                                        <input type="text" class="search-field">
                                    </li>
                                </ul>
                                <span class="input-group-addon">
                                    <input type="checkbox" class="styled" name="data[exactly][1]" checked="checked">
                                </span>
                            </div>
                        </div>
                        <div class="col-lg-5 botReply">
                            <label>Bot trả lời với&nbsp;</label>
                            <label class="learn_switchbot">
                                <input type="checkbox" name="data[Bot][Status]" class="learn_switchinput" checked="">
                                <span class="learn_sliderbot learn_roundbot"></span>
                            </label>
                            <div class="checkbox checkbox-switchery switchery-xs pull-right pd0">
                                <label>
                                    <input type="checkbox" class="switchery randomText" style="display:none">
                                    <span class="switchery switchery-default" style="box-shadow: rgb(223, 223, 223) 0px 0px 0px 0px inset; border-color: rgb(223, 223, 223); background-color: rgb(255, 255, 255); transition: border 0.4s ease 0s, box-shadow 0.4s ease 0s;">
                                        <small style="left: 0px; transition: background-color 0.4s ease 0s, left 0.2s ease 0s;"></small>
                                    </span>
                                    Ngẫu nhiên
                                </label>
                            </div>
                            <div class="wrbutton" indexbt="1">
                                <div class="bt">
                                    <input type="text" name="data[question][1][]" autocomplete="off" class="form-control checkvalid" maxlength="320">
                                    <i class="fa fa-remove icon-bin rmText"></i>
                                </div>
                            </div>
                            <button type="button" class="btn btn-success btn-rounded mt20 w100 hidden">
                                <i class="icon-plus22"></i> Thêm câu trả lời
                            </button>
                        </div>
                        <div class="col-lg-2 metaTarget">
                            <label>Target</label>
                            <div class="input-group">
                                <input type="text" class="target-field" data-target-id="">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@section dialogBotJS{
    <script src="~/static/js/app.js"></script>

    <!--Lacviet-->
    @*<script>
        (function (l, a, c, v, i, e, t){
            a[v] = a[v] || function (){
                a[v].t =+ new Date();
                (a[v].q = a[v].q || []).push(arguments);
            };
            i = l.createElement('script');
            var ii = l.getElementsByTagName('script')[0];
            i.async = 1;
            i.src = c;
            i.id = 'lacviet-script';
            ii.parentNode.insertBefore(i, ii);
        })(document, window, 'http://localhost:54160/static/js/app.js', 'lacviet');
        setTimeout(function(){lacviet.load('U2FsdGVkX19hLyZ3+0e7J+6o2nc9UhCOW54+qG73sjSWMip1szuIeYnp+3na+IZW','U2FsdGVkX180mQVdMji5+0ZHrvdmwR2TyyX1k2HwEEWXIaOpc4aUH7HG/jyn1R1KikKAPO07b8EuJ704FPjZ2Q==','U2FsdGVkX1+ZqiM+BCo9X/bxdtZZa4dQrAp49aDY+tM=');},1500)
        </script>*@
    <!-- End Lacviet -->

    <script>
        var encryptedUrl = CryptoJS.AES.encrypt(_Host, "Secret Passphrase").toString();
        var encryptedUserID = CryptoJS.AES.encrypt($("#userId").val(), "Secret Passphrase").toString();
        var encryptedBotID = CryptoJS.AES.encrypt($("#botId").val(), "Secret Passphrase").toString();
        lacviet.load(''+encryptedUrl+'',''+encryptedUserID+'',''+encryptedBotID+'','U2FsdGVkX19D5jsWIYosQVQ4bBWt2cjbzgkJbDAOSB+Igj5G2vGw1bAq+sh1P/Yc')
    </script>
}
@section footerJS{
    <script>
        var lstCard = @Html.Raw(Json.Encode(cards));
        function card() {
            var temp = '';
            if (lstCard.length != 0) {
                $.each(lstCard, function (index, value) {
                    temp += '<optgroup label="' + value.Name.toUpperCase() + '">';
                    if (value.Cards.length != 0) {
                        $.each(value.Cards, function (index, value) {
                            temp += '<option value="' + value.ID + '">' + value.Name + '</option>';
                        })
                    } else {
                        temp += '<option value=""></option>';
                    }
                    temp += '</optgroup>';
                })
            }
            return temp;
        }

        function module() {
            var htmlListModule = '<option  value="vote">Bình chọn</option><option  value="livechat">Chat trực tiếp</option><option attr-template="true" value="rss">RSS</option><option attr-template="true" value="weather">Thời tiết</option><option  value="reservation">Đặt bàn</option>'; return htmlListModule;
        }
    </script>
    <script src="~/assets/client/js/eventBot/form-learning.js"></script>
}

